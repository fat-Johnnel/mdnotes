
## CMU 15-445/645 数据库系统：关系模型与关系代数

### 1. 数据模型 (Data Model)

数据模型是描述数据、数据关系、数据语义以及数据一致性约束的抽象工具。在数据库系统中，它定义了数据的组织方式。

### 2. 模式 (Schema)

模式是数据库的逻辑结构定义。它描述了数据库中所有关系（表）的名称、属性（列）以及它们的数据类型。在关系型数据库中，通常使用SQL（Structured Query Language）来定义和操作模式。

### 3. 关系模型 (Relational Model)

关系模型是目前最流行的数据模型之一，其核心思想是将数据库存储在简单的数据结构中，即关系（或称表）。

**关系模型的关键特性：**

* **物理存储分离：** 关系模型将物理存储的细节留给DBMS实现，这意味着开发者无需关心数据是如何在硬盘上存储的。
* **高层语言访问：** 用户通过高层语言（如SQL）访问数据，DBMS负责找出最佳的执行策略来满足查询请求。
* **结构 (Structure)：** 定义了数据库中关系及其内容的组织方式，独立于其物理表示。这意味着我们可以更改数据的物理存储方式，而不需要改变应用程序的代码。
* **完整性 (Integrity)：** 确保数据库中的数据内容满足预定义的一致性约束。
* **操作 (Manipulation)：** 提供了一个编程接口，用于访问和修改数据库的内容。

**关系模型中的核心概念：**

* **主键 (Primary Key)：** 主键是一个或一组属性，能够唯一标识关系中的每一条元组（行）。DBMS可以自动生成唯一的主键，例如通过“身份列”（identity column）功能。
* **外键 (Foreign Key)：** 外键是一个或一组属性，它引用另一个关系（表）的主键。外键用于在关系之间建立连接，并维护参照完整性。
* **约束 (Constraints)：** 用户定义的条件，所有数据都必须遵守这些条件，以确保数据的一致性和有效性。

### 4. 数据操纵语言 (Data Manipulation Languages - DML)

DML用于管理和操作数据库中的数据。它们可以分为两大类：

* **过程式 (Procedural) DML：** 用户需要指定数据获取的步骤和顺序。
* **非过程式 (Non-Procedural) DML：** 用户只需指定需要什么数据，而无需指定如何获取数据。

**关系代数 (Relational Algebra)** 是一种重要的**过程式DML**，它是所有关系型数据库查询语言（如SQL）的理论基础。关系代数操作将一个或多个关系作为输入，并产生一个新的关系作为输出。

**关系代数的基本操作：**

1.  **选择 (Select / $\sigma$)：**
    从关系中选择满足特定条件的元组（行）。
    *示例：* $\sigma_{salary > 50000}(Employees)$

2.  **投影 (Projection / $\Pi$)：**
    从关系中选择指定的属性（列），生成一个新的关系。它可以改变属性的顺序，也可以对属性的值进行计算。
    *示例：* $\Pi_{name, city}(Employees)$

3.  **并 (Union / $\cup$)：**
    将两个关系中的所有元组合并，并自动消除重复的元组（在某些实现中，也可能允许重复项）。
    *示例：* $R \cup S$

4.  **交 (Intersection / $\cap$)：**
    生成一个关系，包含在两个输入关系中都出现的元组。
    *示例：* $R \cap S$

5.  **差 (Difference / $-$)：**
    生成一个关系，包含只出现在第一个输入关系中而不出现在第二个输入关系中的元组。
    *示例：* $R - S$

6.  **笛卡尔积 (Product / $\times$)：**
    将两个关系中的所有元组进行两两组合，生成一个新的关系，其包含所有可能的元组对。结果关系的属性是两个输入关系属性的并集。
    *示例：* $R \times S$

7.  **连接 (Join / $\Join$)：**
    连接操作是关系代数中最强大和最常用的操作之一。它根据一个或多个属性的共同值将两个关系中的元组组合起来。DBMS通常会对此操作进行高度优化，以确保其高效执行。连接有多种类型，例如：
    * **自然连接 (Natural Join)：** 根据所有同名属性的相等值进行连接。
    * **Theta 连接 (Theta Join)：** 根据任意条件进行连接。
    * **等值连接 (Equi Join)：** 根据相等条件进行连接。
    *示例：* $Employees \Join_{Employees.dept\_id = Departments.dept\_id} Departments$

### 5. 关系模型的独立性

关系模型的一个重要特点是它独立于任何特定的查询语言实现。这意味着关系代数作为理论基础，可以被不同的查询语言（如SQL）所实现，而这些语言的语法和具体实现细节可能有所不同，但它们都基于相同的关系代数原理。这种独立性使得数据库系统能够灵活地发展和演变，同时保持其核心的数学基础。

---